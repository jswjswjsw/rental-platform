ROSTemplateFormatVersion: '2015-09-01'
Transform: 'Aliyun::Serverless-2018-04-03'
Resources:
  rental-platform:
    Type: 'Aliyun::Serverless::Service'
    Properties:
      Description: '租赁平台后端服务'
    rental-api:
      Type: 'Aliyun::Serverless::Function'
      Properties:
        Description: '租赁平台API接口'
        CodeUri: './'
        Handler: index.handler
        Runtime: nodejs14
        Timeout: 30
        MemorySize: 512
        EnvironmentVariables:
          DB_HOST: '你的RDS外网地址'
          DB_PORT: '3306'
          DB_USER: 'rental_user'
          DB_PASSWORD: '你的数据库密码'
          DB_NAME: 'rental_platform'
          JWT_SECRET: 'rental-platform-jwt-secret-2024-production-key-change-me'
          JWT_EXPIRES_IN: '7d'
          NODE_ENV: 'production'
        Events:
          httpTrigger:
            Type: HTTP
            Properties:
              AuthType: ANONYMOUS
              Methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS']