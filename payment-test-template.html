<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ”¯ä»˜åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 50px auto; 
            padding: 20px; 
            background-color: #f5f5f5;
        }
        .test-container { 
            background: white; 
            padding: 30px; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .pay-button { 
            background: #07c160; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 4px; 
            cursor: pointer; 
            font-size: 16px; 
            margin: 10px; 
        }
        .pay-button:hover { background: #06ad56; }
        .pay-button:disabled { background: #c0c4cc; cursor: not-allowed; }
        .result { 
            margin-top: 20px; 
            padding: 15px; 
            border-radius: 4px; 
            font-family: monospace; 
            white-space: pre-wrap; 
        }
        .success { background: #f0f9ff; border: 1px solid #409eff; color: #409eff; }
        .error { background: #fef0f0; border: 1px solid #f56c6c; color: #f56c6c; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ æ”¯ä»˜åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨æ¥æµ‹è¯•ä¿®å¤åçš„æ”¯ä»˜æŒ‰é’®åŠŸèƒ½</p>
        <h3>æµ‹è¯•æŒ‰é’®</h3>
        <button class="pay-button" onclick="testPaymentClick()">æµ‹è¯•æ”¯ä»˜æŒ‰é’®ç‚¹å‡»</button>
        <button class="pay-button" onclick="testAsyncPayment()">æµ‹è¯•å¼‚æ­¥æ”¯ä»˜æµç¨‹</button>
        <button class="pay-button" onclick="testEnvironmentCheck()">æµ‹è¯•ç¯å¢ƒå˜é‡</button>
        <div id="result" class="result">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
    </div>
    <script>
        function updateResult(message, type = 'success') {
            const resultDiv = document.getElementById('result');
            resultDiv.className = 'result ' + type;
            resultDiv.textContent = message;
            console.log('[' + type.toUpperCase() + '] ' + message);
        }
        
        function testPaymentClick() {
            console.log('ğŸ”„ æ”¯ä»˜æŒ‰é’®è¢«ç‚¹å‡»', { paymentType: 'rent', orderId: 'test-123', paying: false });
            updateResult('âœ… æ”¯ä»˜æŒ‰é’®ç‚¹å‡»æµ‹è¯•æˆåŠŸï¼\næ§åˆ¶å°å·²è¾“å‡ºè°ƒè¯•æ—¥å¿—ã€‚', 'success');
        }
        
        async function testAsyncPayment() {
            updateResult('â³ æµ‹è¯•å¼‚æ­¥æ”¯ä»˜æµç¨‹...', 'success');
            try {
                console.log('ğŸ“ å¼€å§‹åˆ›å»ºæ”¯ä»˜è®¢å•', { orderId: 'test-123', paymentType: 'rent' });
                await new Promise(function(resolve) { setTimeout(resolve, 1000); });
                console.log('å¼€å‘ç¯å¢ƒï¼šæ¨¡æ‹Ÿå¾®ä¿¡æ”¯ä»˜æˆåŠŸ');
                await new Promise(function(resolve) { setTimeout(resolve, 1000); });
                updateResult('âœ… å¼‚æ­¥æ”¯ä»˜æµç¨‹æµ‹è¯•æˆåŠŸï¼\næ‰€æœ‰æ­¥éª¤éƒ½æ­£å¸¸æ‰§è¡Œã€‚', 'success');
            } catch (error) {
                updateResult('âŒ æ”¯ä»˜æµç¨‹æµ‹è¯•å¤±è´¥ï¼š' + error.message, 'error');
            }
        }
        
        function testEnvironmentCheck() {
            const isDev = true; // æ¨¡æ‹Ÿ import.meta.env.DEV
            console.log('ç¯å¢ƒæ£€æŸ¥:', { isDev, userAgent: navigator.userAgent });
            updateResult('âœ… ç¯å¢ƒå˜é‡æµ‹è¯•æˆåŠŸï¼\nå¼€å‘ç¯å¢ƒ: ' + isDev + '\nç”¨æˆ·ä»£ç†: ' + navigator.userAgent, 'success');
        }
        
        console.log('ğŸ”§ æ”¯ä»˜åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
        console.log('ğŸ’¡ è¿™ä¸ªé¡µé¢æ¨¡æ‹Ÿäº†ä¿®å¤åçš„æ”¯ä»˜åŠŸèƒ½');
    </script>
</body>
</html>